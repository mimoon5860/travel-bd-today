// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

enum Role{
  User
  Admin
}

enum ContentType{
  photo
  video
}

model User{
 id       Int     @id @default(autoincrement())
 name String
 photo String?
 role Role @default(User)
 email String
 phone String?
 password String
 address String?
 status Boolean @default(true)
 createdAt DateTime @default(now())
 thana Thana? @relation(fields: [thanaId],references: [id])
 thanaId Int? 
 place Place[]
 review Review[]
}

model Place{
  id       Int     @id @default(autoincrement())
  title String
  coverImage String
  description String @db.Text
  thanaId Int 
  status Boolean @default(true)
  author User @relation(fields: [authorId],references: [id])
  authorId Int 
  createdAt DateTime @default(now())
  review Review[]
  placeContent PlaceContent[]
}

model PlaceContent{
  id       Int    @id @default(autoincrement())
  fileName String
  place Place @relation(fields: [placeId],references: [id])
  placeId Int 
  type ContentType
}

model Review{
  id       Int     @id @default(autoincrement())
  user User @relation(fields: [userId],references: [id])
  userId Int
  place Place @relation(fields: [placeId],references: [id])
  placeId Int
  rating Int
  review String
  reviewContent ReviewContent[]
  status Boolean @default(true)
  createdAt DateTime @default(now())
}

model ReviewContent{
  id       Int    @id @default(autoincrement())
  fileName String
  review Review @relation(fields: [reviewId],references: [id])
  reviewId Int 
  type ContentType
}

model Division{
  id       Int     @id @default(autoincrement())
  name String
  districts District[]
}
model District{
  id       Int    @id @default(autoincrement())
  name String
  division Division @relation(fields: [divisionId],references: [id])
  divisionId Int
  thana Thana[]
}

model Thana{
  id       Int    @id @default(autoincrement())
  name String
  district District  @relation(fields: [districtId],references: [id])
  districtId Int
  user User[]
}

